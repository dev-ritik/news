self.studioLoader.context.evalInContext("window.STUDIO_SDK_START=+new Date();E(\"ima.legacy.common.ErrorUtils\");var bo=function(a){return(a=a.exec(xb))?a[1]:\"\"};(function(){if(Mi)return bo(/Firefox\\/([0-9.]+)/);if(Wb||Xb||Vb)return fc;if(Qi)return Rb()?bo(/CriOS\\/([0-9.]+)/):bo(/Chrome\\/([0-9.]+)/);if(Ri&&!Rb())return bo(/Version\\/([0-9.]+)/);if(Ni||Oi){var a=/Version\\/(\\S+).*Mobile\\/(\\S+)/.exec(xb);if(a)return a[1]+\".\"+a[2]}else if(Pi)return(a=bo(/Android\\s+([0-9.]+)/))?a:bo(/Version\\/([0-9.]+)/);return\"\"})();var co={},eo=/OS (\\S+) like/,fo=/Android (\\S+);/,go=function(a,b){null==co[b]&&((a=a.exec(xb))?(a=a[1].replace(/_/g,\".\"),co[b]=0<=tb(a,b)):co[b]=!1);return co[b]};var ho=function(){L.call(this);this.f=!1;this.N=E(\"ima.legacy.common.MouseAndTouchEventTracker\");this.g=this.j=!1;this.b=0;this.l=[];this.w=!1};y(ho,L);var io=function(a,b){null==b||a.f||(a.a=b,a.A=!Ni&&!Oi,a.C=Ni||Oi,a.A?a.a.addEventListener(\"click\",x(a.s,a),!1):a.C?(a.a.addEventListener(\"touchstart\",x(a.I,a),!1),a.a.addEventListener(\"touchmove\",x(a.H,a),!1),a.a.addEventListener(\"touchend\",x(a.G,a),!1)):Gd(a.N,\"Neither click nor touch is supported in this platform.\"),a.f=!0)},jo=function(a){null!=a.a&&a.f&&(a.f=!1,a.A?a.a.removeEventListener(\"click\",x(a.s,a),!1):a.C&&(a.a.removeEventListener(\"touchstart\",x(a.I,a),!1),a.a.removeEventListener(\"touchmove\",x(a.H,a),!1),a.a.removeEventListener(\"touchend\",x(a.G,a),!1)))};ho.prototype.I=function(a){this.j=!0;this.b=a.touches.length;this.w=ko(this,a.touches)||1!=a.touches.length;a=a.touches;this.l=[];for(var b=0;b<a.length;b++)this.l.push(a[b].identifier)};ho.prototype.H=function(a){this.g=!0;this.b=a.touches.length};ho.prototype.G=function(a){this.j&&1==this.b&&!this.g&&!this.w&&ko(this,a.changedTouches)&&this.dispatchEvent(new Ve(\"click\"));this.b=a.touches.length;0==this.b&&(this.g=this.j=!1)};ho.prototype.s=function(){this.dispatchEvent(new Ve(\"click\"))};var ko=function(a,b){for(var c=0;c<b.length;c++)if(a.l.includes(b[c].identifier))return!0;return!1};var lo=function(a){Ve.call(this,a)};y(lo,Ve);var mo=function(){L.call(this)};y(mo,L);var no=function(){L.call(this);this.l=E(\"ima.legacy.vast.VideoDisplayEventTracker\");this.g=new J;this.s=new ho;this.w=\"none\"};y(no,L);var qo=function(a){this.width=oo(a).width;this.height=oo(a).height;this.f=!1;this.b=a.a.muted;this.a=po(a);this.volume=a.a.volume};qo.prototype.muted=function(a,b){return!this.b&&a||0<this.volume&&0==b};no.prototype.v=function(){ro(this);no.o.v.call(this)};var ro=function(a){null!=a.b&&a.b.dispose();null!=a.j&&a.j.dispose();null!=a.a&&so(a.a);Qe(a.g);jo(a.s)},Z=function(a,b,c){c&&null!=a.g.get(b)||(a.g.set(b,!0),G(a.l,\"dispatching event \"+b),a.dispatchEvent(new lo(b)))},to=function(a,b){null!=a.g.get(b)&&(G(a.l,\"removing event \"+b),Re(a.g,b))};g=no.prototype;g.Kd=function(){a:{var a=this.a;if(a.a.seeking&&!a.j)a.j=!0,a.l=uo(a);else{if(!a.a.seeking&&a.j){a.j=!1;var b=0!=a.a.currentTime&&a.a.currentTime<a.l;a.l=-1;break a}if(!a.a.seeking&&0!=a.a.currentTime&&uo(a)>a.a.currentTime){b=.5<uo(a)-a.a.currentTime;break a}}b=!1}a=vo(this.a);if(b&&(Z(this,\"rewind\",!1),-1!=a)){uo(this.a)>=.75*a||to(this,\"thirdquartile\");uo(this.a)>=.5*a||to(this,\"midpoint\");uo(this.a)>=.25*a||to(this,\"firstquartile\");a:{b=this.a;for(var c=b.f.O(),d=c.length-1;0<=d;d--)if(.5>c[d]){c=b.f;c=0==c.W()?null:c.get(c.W()-1);d=b.f;d.a.length=0;d.b=0;.5<=c&&b.f.add(c);b=!0;break a}b=!1}b&&Z(this,\"replay\",!1)}-1!=a&&(uo(this.a)>=.25*a&&Z(this,\"firstquartile\",!0),uo(this.a)>=.5*a&&Z(this,\"midpoint\",!0),uo(this.a)>=.75*a&&Z(this,\"thirdquartile\",!0))};g.Jd=function(){Z(this,\"creativeview\",!0);null!=this.A?(M(this.b,this.s,\"click\",this.Fd,!1),io(this.s,this.A)):M(this.b,this.a,\"click\",this.le,void 0);Z(this,\"start\",!0);(this.a.a.muted||0==this.a.a.volume)&&Z(this,\"mute\",!1)};g.Ld=function(){var a=this.a.a.muted,b=this.a.a.volume,c=this.f;c.b&&!a||!a&&0==c.volume&&0<b?Z(this,\"unmute\",!1):this.f.muted(a,b)&&Z(this,\"mute\",!1);this.f.b=a;this.f.volume=b};g.Id=function(){if(this.a.a.ended)Z(this,\"complete\",!0);else{var a;if(a=\"pausedAtBeginning\"==this.w)a=this.a,a=!isNaN(a.a.duration)&&0<a.a.duration&&0==a.a.currentTime;a?Z(this,\"stop\",!0):wo(this.a)&&!this.a.a.seeking&&(this.f.f=!0,Z(this,\"pause\",!1))}};g.ke=function(){this.f.f&&(this.f.f=!1,Z(this,\"resume\",!1))};g.Gd=function(){var a=this.a;if(!Pi||Pi&&go(fo,2.3))a=!0;else{var b=a.a.duration-uo(a);a=0==a.a.currentTime&&1.5>=b}a?\"pausedAtEnd\"==this.w&&wo(this.a)?Z(this,\"stop\",!0):Z(this,\"complete\",!0):(G(this.l,\"Pausing video..\"),this.a.a.pause())};g.Fd=function(){Z(this,\"click\",!1)};g.Hd=function(){Z(this,\"error\",!1)};g.le=function(){Z(this,\"click\",!1)};g.kc=function(){this.f.a=!0;Z(this,\"fullscreen\",!1)};g.jc=function(){this.f.a=!1};g.je=function(){var a=oo(this.a),b=po(this.a),c=this.f;if(a.width!=c.width||a.height!=c.height)!this.f.a&&b?this.kc():this.f.a&&!b&&this.jc(),this.f.width=a.width,this.f.height=a.height};var xo=function(){this.b=0;this.a=[]};g=xo.prototype;g.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%4;return b};g.get=function(a){a=yo(this,a);return this.a[a]};g.set=function(a,b){a=yo(this,a);this.a[a]=b};g.W=function(){return this.a.length};g.O=function(){var a=this.W(),b=this.W(),c=[];for(a=this.W()-a;a<b;a++)c.push(this.get(a));return c};g.S=function(){for(var a=[],b=this.W(),c=0;c<b;c++)a[c]=c;return a};g.T=function(a){return a<this.W()};g.Fa=function(a){for(var b=this.W(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var yo=function(a,b){if(b>=a.a.length)throw Error(\"Out of bounds exception\");return 4>a.a.length?b:(a.b+Number(b))%4};var zo=function(a){L.call(this);this.a=a;this.f=new xo;this.l=-1;this.s=this.j=!1};y(zo,mo);var vo=function(a){return isNaN(a.a.duration)?-1:a.a.duration},wo=function(a){return a.a.paused?Ni||Oi||Qi?a.a.currentTime<a.a.duration:!0:!1},po=function(a){return Ni?a.a.webkitSupportsFullscreen&&a.a.webkitDisplayingFullscreen:a.a.offsetWidth>=document.body.offsetWidth&&a.a.offsetHeight>=document.body.offsetHeight},uo=function(a){for(a=a.f.O();a.length;){var b=a.pop();if(0<b)return b}return-1},oo=function(a){return new Uc(a.a.offsetWidth,a.a.offsetHeight)};zo.prototype.v=function(){zo.o.v.call(this);so(this)};var so=function(a){null!=a.g&&(jo(a.g),a.g=null);null!=a.b&&(a.b.dispose(),a.b=null);a.l=-1;a.s=!1;a.j=!1;a=a.f;a.a.length=0;a.b=0},Ao=function(a,b){a.s||(a.s=!0,a.dispatchEvent(\"start\"),!Pi&&(!Ni||(Ni||Oi)&&go(eo,4))||a.lc(b))};g=zo.prototype;g.ie=function(){Ri&&(this.a.currentTime=.001)};g.rc=function(a){this.dispatchEvent(\"play\");Ni||Oi||Ao(this,a)};g.Rd=function(a){this.s||((Ni||Oi)&&0<this.a.currentTime&&Ao(this,a),Zb&&this.rc(a));this.f.add(this.a.currentTime);this.dispatchEvent(\"timeUpdate\")};g.Sd=function(){this.dispatchEvent(\"volumeChange\")};g.Qd=function(){this.dispatchEvent(\"pause\")};g.Nd=function(){this.dispatchEvent(\"end\")};g.lc=function(){this.dispatchEvent(\"beginFullscreen\")};g.Pd=function(){this.dispatchEvent(\"endFullscreen\")};g.Od=function(){this.dispatchEvent(\"error\")};g.Md=function(){this.dispatchEvent(\"click\")};var Bo={},Co=function(a){this.D=a;this.g=this.h=!0;this.f=new no;this.f.w=\"pausedAtBeginning\";this.j=this.a=this.b=null;ck(x(this.$,this))},Do=new J;Co.prototype.w=!1;Co.prototype.s=!1;Co.prototype.l=!0;var Eo=function(a){var b=Do.get(a);null==b&&(b=new Co(a),Do.set(a,b));return b};Co.prototype.$=function(a){this.a=a;Fo(this)};var Fo=function(a){Go(a,!1);Go(a,!0);if(null!=a.a&&null!=a.j){var b=a.f,c=a.b;ro(b);b.a=c;c=b.a;so(c);c.b=new Hg(c);M(c.b,c.a,\"canplay\",c.ie,void 0);M(c.b,c.a,\"ended\",c.Nd,void 0);M(c.b,c.a,\"webkitbeginfullscreen\",c.lc,void 0);M(c.b,c.a,\"webkitendfullscreen\",c.Pd,void 0);M(c.b,c.a,\"pause\",c.Qd,void 0);M(c.b,c.a,\"playing\",c.rc,void 0);M(c.b,c.a,\"timeupdate\",c.Rd,void 0);M(c.b,c.a,\"volumechange\",c.Sd,void 0);M(c.b,c.a,\"error\",c.Od,void 0);c.g=new ho;M(c.b,c.g,\"click\",c.Md,!1);io(c.g,c.a);b.f=new qo(b.a);b.A=null;b.b=new Hg(b);M(b.b,b.a,\"timeUpdate\",b.Kd,!1);M(b.b,b.a,\"volumeChange\",b.Ld,!1);M(b.b,b.a,\"pause\",b.Id,!1);M(b.b,b.a,\"play\",b.ke,!1);M(b.b,b.a,\"end\",b.Gd,!1);M(b.b,b.a,\"beginFullscreen\",b.kc,!1);M(b.b,b.a,\"endFullscreen\",b.jc,!1);M(b.b,b.a,\"start\",b.Jd,!1);M(b.b,b.a,\"error\",b.Hd,!1);b.j=new Hf(1E3);M(b.b,b.j,\"tick\",b.je,!1,b);b.j.start();a.b.Aa(\"timeUpdate\",a.Kc,!1,a);a.j.paused?a.f.Aa(\"start\",a.Za,!1,a):a.Za()}},Go=function(a,b){Ho(a,b,\"resume\",a.Za);Ho(a,b,\"replay\",a.se);Ho(a,b,\"pause\",a.ne);Ho(a,b,\"stop\",a.He);Ho(a,b,\"mute\",a.fe);Ho(a,b,\"unmute\",a.Re);Ho(a,b,\"firstquartile\",a.dd);Ho(a,b,\"midpoint\",a.ee);Ho(a,b,\"thirdquartile\",a.Ne);Ho(a,b,\"complete\",a.Tc)},Ho=function(a,b,c,d){(b?a.f.Aa:a.f.Ia).call(a.f,c,d,!1,a)};g=Co.prototype;g.Za=function(){this.f.Ia(\"start\",this.Za,!1,this);this.a.dispatchEvent(new P(\"videoStart\"));Io(this,\"play\",!this.l);Jo(this,\"Start\");this.l=!1;null!=this.a&&this.g&&!this.w&&(this.a.w(),this.w=!0)};g.se=function(){Io(this,\"replay\",!0);Jo(this,\"Stop\");this.h=!1};g.ne=function(){Io(this,\"pause\",!0);Jo(this,\"Stop\")};g.He=function(){Io(this,\"stop\",!0);Jo(this,\"Stop\");this.h=!1};g.fe=function(){Io(this,\"mute\",!this.l)};g.Re=function(){Io(this,\"unmute\",!this.l)};g.dd=function(){Io(this,\"firstquartile\")};g.ee=function(){Io(this,\"midpoint\")};g.Ne=function(){Io(this,\"thirdquartile\")};g.Tc=function(){Io(this,\"complete\");Jo(this,\"Stop\");this.h=!1;null!=this.a&&this.g&&!this.s&&(this.a.w(),this.s=!0)};g.Kc=function(a){var b=this.D;a=\"EVENT_VIDEO_\"+a.type.toUpperCase();O(this.a.F,\"updateVideoProgress\",[a,vo(this.b),this.b.a.currentTime]);G(H,Qh(b,a))};var Io=function(a,b,c){null!=a.a&&a.g&&(c&&(c=a.D,di(a.a.b,\"Count\",c,\"EVENT_VIDEO_INTERACTION\"),G(H,Qh(c,\"EVENT_VIDEO_INTERACTION\"))),c=a.D,b=\"EVENT_VIDEO_\"+b.toUpperCase(),di(a.a.b,\"Count\",c,b),G(H,Qh(c,b)))},Jo=function(a,b){if(null!=a.a&&a.g&&a.h){var c=a.D;di(a.a.b,b,c,\"EVENT_VIDEO_VIEW_TIMER\");G(H,Qh(c,\"EVENT_VIDEO_VIEW_TIMER\"))}};var Ko=function(a){K.call(this);this.f=a;this.a={};this.b=null;ck(x(this.h,this))};y(Ko,K);p(\"studio.video.Reporter\",Ko,void 0);var Lo=new J,Mo=function(a,b,c){var d=Eo(a);\"boolean\"==typeof c&&(d.l=c);ro(d.f);d.h=!0;d.g=!0;d.j=b;d.b=new zo(d.j);Fo(d);Lo.T(a)||Lo.set(a,new Ko(b))};Ko.attach=Mo;Ko.prototype.h=function(a){this.b=a;this.b.Mb(this.f)};Ko.prototype.v=function(){for(var a in this.a)this.f[a]=this.a[a];Ko.o.v.call(this)};var No=function(a){a=Eo(a);null==a.b||wo(a.b)||a.b.a.ended||(Io(a,\"stop\",!1),Jo(a,\"Stop\"),a.h=!1);Go(a,!1);a.g=!1;a.j=null;ro(a.f);a.b&&(a.b.Ia(\"timeUpdate\",a.Kc,!1,a),a.b.dispose())};Ko.detach=No;var Oo=function(){};var Po,Qo=function(){};y(Qo,Oo);var Ro=function(a){a:{if(!a.a&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var b=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],c=0;c<b.length;c++){var d=b[c];try{new ActiveXObject(d);var e=a.a=d;break a}catch(f){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");}e=a.a}return e?new ActiveXObject(e):new XMLHttpRequest};Po=new Qo;var To=function(a,b){A(\"Blob\"in h,\"getBlob is not supported in this browser.\");b=b?Lb(b):{};b.responseType=\"blob\";return So(\"GET\",a,b).then(function(a){return a.response})},So=function(a,b,c){var d=c||{},e=d.Ve?Ro(d.Ve):Ro(Po);return ne(new de(function(c,k){var f;try{e.open(a,b,!0)}catch(T){k(new Uo(\"Error opening XHR: \"+T.message,b,e))}e.onreadystatechange=function(){if(4==e.readyState){h.clearTimeout(f);a:switch(e.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break a;default:a=!1}!a&&(a=0===e.status)&&(a=b.match(fg)[1]||null,!a&&h.self&&h.self.location&&(a=h.self.location.protocol,a=a.substr(0,a.length-1)),a=a?a.toLowerCase():\"\",a=!(\"http\"==a||\"https\"==a||\"\"==a));a?c(e):k(new Vo(e.status,b,e))}};e.onerror=function(){k(new Uo(\"Network error\",b,e))};if(d.headers){for(var u in d.headers){var w=d.headers[u];null!=w&&e.setRequestHeader(u,w)}w=d.headers[\"Content-Type\"]}u=h.FormData&&!1;\"POST\"!=a||void 0!==w||u||e.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");d.withCredentials&&(e.withCredentials=d.withCredentials);d.responseType&&(e.responseType=d.responseType);d.mimeType&&e.overrideMimeType(d.mimeType);0<d.Pe&&(f=h.setTimeout(function(){e.onreadystatechange=ka;e.abort();k(new Wo(b,e))},d.Pe));try{e.send(null)}catch(T){e.onreadystatechange=ka,h.clearTimeout(f),k(new Uo(\"Error sending XHR: \"+T.message,b,e))}}),function(a){a instanceof ce&&e.abort();throw a;})},Uo=function(a,b){Ca.call(this,a+\", url=\"+b);this.url=b};y(Uo,Ca);Uo.prototype.name=\"XhrError\";var Vo=function(a,b,c){Uo.call(this,\"Request Failed, status=\"+a,b,c);this.status=a};y(Vo,Uo);Vo.prototype.name=\"XhrHttpError\";var Wo=function(a,b){Uo.call(this,\"Request timed out\",a,b)};y(Wo,Uo);Wo.prototype.name=\"XhrTimeoutError\";p(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return dk().then(function(b){b=b.Ha(a);return\"file:\"==window.location.protocol?ie(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):ob(b,\"/itag/\")?Xo(Yo(b)).then(To):To(b)})},void 0);var Xo=function(a){return So(\"HEAD\",a).then(function(b){return Zo(b)?So(\"GET\",a).then(function(a){return Xo(a.response)}):a})},Yo=function(a){return ob(a,\"/itag/\")&&!ob(a,\"/alr/yes/\")?(a=a.split(\"/\"),a.splice(a.length-2,0,\"alr\",\"yes\"),a.join(\"/\")):a},Zo=function(a){a=a.getResponseHeader(\"Content-Type\");return ob(a,\"text/plain\")};");
